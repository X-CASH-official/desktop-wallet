!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@angular/core")):"function"==typeof define&&define.amd?define("css-animator",["@angular/core"],e):"object"==typeof exports?exports["css-animator"]=e(require("@angular/core")):t["css-animator"]=e(t.ng.core)}("undefined"!=typeof self?self:this,function(i){return function(i){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};i[t].call(e.exports,e,e.exports,o);e.l=!0;return e.exports}o.m=i;o.c=n;o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})};o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};o.d(e,"a",e);return e};o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};o.p="";return o(o.s=4)}([function(t,e){t.exports=i},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(r=(s<3?o(r):3<s?o(e,i,r):o(e,i))||r);return 3<s&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=i(2),r=function(){function t(){}t.prototype.builder=function(){return new s.AnimationBuilder};return t=n([o.Injectable()],t)}();e.AnimationService=r},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});!function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(e(5))},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(r=(s<3?o(r):3<s?o(e,i,r):o(e,i))||r);return 3<s&&r&&Object.defineProperty(e,i,r),r},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(i,n){return function(t,e){n(t,e,i)}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),a=i(1),p=function(){function t(t,e){this._elementRef=t;this._animationBuilder=e.builder()}Object.defineProperty(t.prototype,"animates",{set:function(t){this._defaultOptions=t},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"animatesOnInit",{set:function(t){this._initOptions=t},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"animatesInitMode",{set:function(t){"string"==typeof t&&(this._initMode=t.toLowerCase())},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"animationBuilder",{get:function(){return this._animationBuilder},enumerable:!0,configurable:!0});t.prototype.ngOnInit=function(){if(this._initOptions){var t,e=this._animationBuilder.setOptions(this._initOptions);switch(this._initMode){case"show":t=e.show(this._elementRef.nativeElement);break;case"hide":t=e.hide(this._elementRef.nativeElement);break;default:t=e.animate(this._elementRef.nativeElement)}t.then(function(t){return t},function(t){})}};t.prototype.start=function(t){this._started=!0;this.setOptions(t);return this._animationBuilder.animate(this._elementRef.nativeElement).then(function(t){return t},function(t){})};t.prototype.hide=function(t){this.setOptions(t);return this._animationBuilder.setOptions(t).hide(this._elementRef.nativeElement).then(function(t){return t},function(t){})};t.prototype.show=function(t){this.setOptions(t);return this._animationBuilder.show(this._elementRef.nativeElement).then(function(t){return t},function(t){})};t.prototype.animate=function(t){this.setOptions(t);return this._animationBuilder.setOptions(this._defaultOptions).animate(this._elementRef.nativeElement).then(function(t){return t},function(t){})};t.prototype.pause=function(){this._started&&this._animationBuilder.setPlayState("paused").applyPlayState(this._elementRef.nativeElement)};t.prototype.resume=function(){this._started&&this._animationBuilder.setPlayState("running").applyPlayState(this._elementRef.nativeElement)};t.prototype.toggle=function(){this._started&&this._animationBuilder.setPlayState("running"===this._animationBuilder.playState?"paused":"running").applyPlayState(this._elementRef.nativeElement)};t.prototype.stop=function(){this._started=!1;this._animationBuilder.stop(this._elementRef.nativeElement).then(function(t){return t},function(t){})};t.prototype.startOrStop=function(t){this._started?this.stop():this.start(t)};t.prototype.setOptions=function(t){t?this._animationBuilder.setOptions(t):this._animationBuilder.setOptions(this._defaultOptions)};return t=n([r.Directive({selector:"[animates]",exportAs:"animates",inputs:["animates","animatesOnInit","animatesInitMode"]}),s(0,r.Inject(r.ElementRef)),s(1,r.Inject(a.AnimationService)),o("design:paramtypes",[r.ElementRef,a.AnimationService])],t)}();e.AnimatesDirective=p},function(t,i,e){"use strict";function n(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"__esModule",{value:!0});n(e(2));n(e(6))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u;!function(t){t[t.Animate=0]="Animate";t[t.Show=1]="Show";t[t.Hide=2]="Hide"}(u=e.AnimationMode||(e.AnimationMode={}));var n=function(){function i(){this.animationOptions=Object.assign({},i.defaults);this.defaultOptions=Object.assign({},this.animationOptions);this.classes=[];this.activeClasses=new Map;this.listeners=new Map;this.timeouts=new Map;this.styles=new Map;this.log("AnimationBuilder created.")}i.prototype.show=function(t){return this.animate(t,u.Show)};i.prototype.hide=function(t){return this.animate(t,u.Hide)};i.prototype.stop=function(t,e){void 0===e&&(e=!0);this.removeTimeouts(t);this.removeListeners(t);e&&this.reset(t,!1);return Promise.resolve(t)};i.prototype.animate=function(n,o){var s=this;void 0===o&&(o=u.Animate);if(i.disabled||this.animationOptions.disabled)return this.animateDisabled(n,o);o===u.Show&&this.hideElement(n);return new Promise(function(t,e){s.removeTimeouts(n);var i=setTimeout(function(){s.reset(n,!0,!1,!0);s.registerAnimationListeners(n,o,t,e);s.saveStyle(n);s.saveClasses(n,o);s.pinElement(n,o);s.nextFrame(function(){s.showElement(n,o);s.applyProperties(n,o)})},s.animationOptions.delay);s.addTimeout(n,i,e);s.log("Timeout "+i+" registered for element",n)})};i.prototype.reset=function(t,e,i,n){void 0===e&&(e=!0);void 0===i&&(i=!1);void 0===n&&(n=!1);if(e){this.removeTimeouts(t,i);this.removeListeners(t,n)}this.removeStyles(t);this.removeClasses(t)};i.prototype.dispose=function(){this.timeouts.forEach(function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];clearTimeout(n.timeout)}});this.listeners.forEach(function(t,e){for(var i=0,n=t;i<n.length;i++){var o=n[i];e.removeEventListener(o.eventName,o.handler)}});this.classes=[];this.styles=new Map;this.timeouts=new Map;this.listeners=new Map};i.prototype.addAnimationClass=function(t){-1===this.classes.indexOf(t)&&this.classes.push(t);return this};i.prototype.removeAnimationClass=function(t){var e=this.classes.indexOf(t);-1!==e&&this.classes.splice(e,1);return this};Object.defineProperty(i,"DEBUG",{get:function(){return i._DEBUG},set:function(t){i._DEBUG=t},enumerable:!0,configurable:!0});Object.defineProperty(i,"disabled",{get:function(){return i._disabled},set:function(t){i._disabled=t},enumerable:!0,configurable:!0});Object.defineProperty(i,"defaults",{get:function(){return i._defaults},enumerable:!0,configurable:!0});i.prototype.animateDisabled=function(t,e){e===u.Show?this.showElement(t,e):e===u.Hide&&this.hideElement(t,e);return Promise.resolve(t)};i.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.DEBUG&&console.log.apply(console,["css-animator:"].concat(t))};i.prototype.nextFrame=function(t){i.raf(function(){i.raf(t)})};i.prototype.camelCase=function(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})};i.prototype.hideElement=function(t,e){this.animationOptions.useVisibility?t.style.visibility="hidden":t.setAttribute("hidden","")};i.prototype.showElement=function(t,e){this.animationOptions.pin&&e===u.Show&&(t.style.visibility="visible");this.animationOptions.useVisibility?t.style.visibility="visible":t.removeAttribute("hidden")};i.prototype.pinElement=function(t,e){if(this.animationOptions.pin){e===u.Show&&(t.style.visibility="hidden");this.animationOptions.useVisibility||this.showElement(t);var i=this.getPosition(t);t.style.position=this.animationOptions.fixed?"fixed":"absolute";t.style.top=i.top+"px";t.style.left=i.left+"px";t.style.width=i.width+"px";t.style.height=i.height+"px";t.style.margin="0px"}};i.prototype.getPosition=function(t){var e=t.getBoundingClientRect(),i=window.getComputedStyle(t),n=t.offsetLeft,o=t.offsetTop,s=e.width-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth),r=e.height-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth);if(this.animationOptions.fixed){n=e.left+window.scrollX;o=e.top+window.scrollY}return{left:n,top:o,width:s,height:r}};i.prototype.registerAnimationListeners=function(t,e,i,n){var o,s,r=this,a=this.animationStartEvent(t),p=this.animationEndEvent(t);t.addEventListener(a,o=function(){r.log("Animation start handler fired for element",t);t.removeEventListener(a,o);return o});this.log("Registered animation start listener for element",t);t.addEventListener(p,s=function(){r.log("Animation end handler fired for element",t);t.removeEventListener(p,s);r.removeListeners(t,!1);r.reset(t,!0,!1,!1);e===u.Hide&&r.hideElement(t);e===u.Show&&r.showElement(t);i(t);return s});this.log("Registered animation end listener for element",t);this.addListener(t,a,o);this.addListener(t,p,s,n)};i.prototype.addTimeout=function(t,e,i){this.timeouts.has(t)||this.timeouts.set(t,[]);this.timeouts.get(t).push({timeout:e,reject:i})};i.prototype.addListener=function(t,e,i,n){this.listeners.has(t)||this.listeners.set(t,[]);var o=Object.assign({},this.classes);this.listeners.get(t).push({eventName:e,handler:i,reject:n,classes:o})};i.prototype.removeListeners=function(e,i){var n=this;void 0===i&&(i=!1);if(this.listeners.has(e)){this.listeners.get(e).forEach(function(t){e.removeEventListener(t.eventName,t.handler);n.log("Listener "+t.eventName+" removed for element",e);i&&n.animationOptions.reject&&t.reject&&t.reject("animation_aborted")});this.listeners.delete(e)}};i.prototype.removeTimeouts=function(e,i){var n=this;void 0===i&&(i=!1);if(this.timeouts.has(e)){this.timeouts.get(e).forEach(function(t){clearTimeout(t.timeout);n.log("Timeout "+t.timeout+" removed for element",e);i&&n.animationOptions.reject&&t.reject&&t.reject("animation_aborted")});this.timeouts.delete(e)}};i.prototype.animationEndEvent=function(t){var e=document.createElement("endAnimationElement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(var n in i)if(void 0!==e.style[n])return i[n];return null};i.prototype.animationStartEvent=function(t){var e=document.createElement("startAnimationElement"),i={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"animationstart",WebkitAnimation:"webkitAnimationStart"};for(var n in i)if(void 0!==e.style[n])return i[n];return null};i.prototype.applyProperties=function(t,e){this.applyClasses(t,e);this.applyStyles(t,e)};i.prototype.saveStyle=function(t){var e={};for(var i in t.style)e[i]=t.style.getPropertyValue(i);this.styles.set(t,e)};i.prototype.applyStyles=function(t,e){this.applyFillMode(t);this.applyTimingFunction(t);this.applyPlayState(t);this.applyDirection(t);this.applyDuration(t);this.applyIterationCount(t)};i.prototype.removeStyles=function(t){if(this.styles.has(t)){var e=this.styles.get(t);t.removeAttribute("style");for(var i in e)t.style.setProperty(i,e[i]);this.styles.delete(t)}};i.prototype.saveClasses=function(t,e){var i=this.classes.slice(0);switch(e){case u.Show:i.push("animated-show");break;case u.Hide:i.push("animated-hide")}i.push("animated",this.animationOptions.type);this.activeClasses.set(t,i)};i.prototype.applyClasses=function(t,e){var i,n=this.activeClasses.get(t)||[];(i=t.classList).add.apply(i,["animated"].concat(n))};i.prototype.removeClasses=function(t){var e,i=this.activeClasses.get(t)||[];(e=t.classList).remove.apply(e,["animated","animated-show","animated-hide"].concat(i));this.activeClasses.delete(t)};i.prototype.applyStyle=function(t,e,i){var n=document.createElement("checkStyle"),o={standard:this.camelCase(e),webkit:this.camelCase("-webkit-"+e),mozilla:this.camelCase("-moz-"+e),opera:this.camelCase("-o-"+e),explorer:this.camelCase("-ie-"+e)};for(var s in o)if(o.hasOwnProperty(s)&&void 0!==n.style[o[s]]){t.style[o[s]]=null==i?null:i;break}return this};Object.defineProperty(i.prototype,"defaults",{get:function(){return this.defaultOptions},set:function(t){this.defaultOptions=t},enumerable:!0,configurable:!0});i.prototype.setDefaults=function(t){this.defaults=t;return this};Object.defineProperty(i.prototype,"options",{get:function(){return this.animationOptions},set:function(t){this.animationOptions=t},enumerable:!0,configurable:!0});i.prototype.setOptions=function(t){Object.assign(this.options,t);return this};Object.defineProperty(i.prototype,"disabled",{get:function(){return this.animationOptions.disabled},set:function(t){this.animationOptions.disabled=t},enumerable:!0,configurable:!0});Object.defineProperty(i.prototype,"reject",{get:function(){return this.animationOptions.reject},set:function(t){this.animationOptions.reject=t},enumerable:!0,configurable:!0});Object.defineProperty(i.prototype,"pin",{get:function(){return this.animationOptions.pin},set:function(t){this.animationOptions.pin=t},enumerable:!0,configurable:!0});i.prototype.setPin=function(t){this.pin=t;return this};Object.defineProperty(i.prototype,"useVisibility",{get:function(){return this.animationOptions.useVisibility},set:function(t){this.animationOptions.useVisibility=t},enumerable:!0,configurable:!0});i.prototype.setUseVisibility=function(t){this.useVisibility=t;return this};Object.defineProperty(i.prototype,"type",{get:function(){return this.animationOptions.type},set:function(t){this.animationOptions.type=t},enumerable:!0,configurable:!0});i.prototype.setType=function(t){this.type=t;return this};Object.defineProperty(i.prototype,"fillMode",{get:function(){return this.animationOptions.fillMode},set:function(t){this.animationOptions.fillMode=t},enumerable:!0,configurable:!0});i.prototype.setFillMode=function(t){this.fillMode=t;return this};i.prototype.applyFillMode=function(t,e){this.applyStyle(t,"animation-fill-mode",e||this.animationOptions.fillMode);return this};Object.defineProperty(i.prototype,"timingFunction",{get:function(){return this.animationOptions.timingFunction},set:function(t){this.animationOptions.timingFunction=t},enumerable:!0,configurable:!0});i.prototype.setTimingFunction=function(t){this.timingFunction=t;return this};i.prototype.applyTimingFunction=function(t,e){this.applyStyle(t,"animation-timing-function",e||this.animationOptions.timingFunction);return this};Object.defineProperty(i.prototype,"playState",{get:function(){return this.animationOptions.playState},set:function(t){this.animationOptions.playState=t},enumerable:!0,configurable:!0});i.prototype.setPlayState=function(t){this.playState=t;return this};i.prototype.applyPlayState=function(t,e){this.applyStyle(t,"animation-play-state",e||this.animationOptions.playState);return this};Object.defineProperty(i.prototype,"direction",{get:function(){return this.animationOptions.direction},set:function(t){this.animationOptions.direction=t},enumerable:!0,configurable:!0});i.prototype.setDirection=function(t){this.direction=t;return this};i.prototype.applyDirection=function(t,e){this.applyStyle(t,"animation-direction",e||this.animationOptions.direction);return this};Object.defineProperty(i.prototype,"duration",{get:function(){return this.animationOptions.duration},set:function(t){this.animationOptions.duration=t},enumerable:!0,configurable:!0});i.prototype.setDuration=function(t){this.duration=t;return this};i.prototype.applyDuration=function(t,e){this.applyStyle(t,"animation-duration",(e||this.animationOptions.duration)+"ms");return this};Object.defineProperty(i.prototype,"delay",{get:function(){return this.animationOptions.delay},set:function(t){this.animationOptions.delay=t},enumerable:!0,configurable:!0});i.prototype.setDelay=function(t){this.delay=t;return this};i.prototype.applyDelayAsStyle=function(t,e){this.applyStyle(t,"animation-delay",(e||this.animationOptions.delay)+"ms");return this};Object.defineProperty(i.prototype,"iterationCount",{get:function(){return this.animationOptions.iterationCount},set:function(t){this.animationOptions.iterationCount=t},enumerable:!0,configurable:!0});i.prototype.setIterationCount=function(t){this.iterationCount=t;return this};i.prototype.applyIterationCount=function(t,e){this.applyStyle(t,"animation-iteration-count",e||this.animationOptions.iterationCount);return this};i._DEBUG=!1;i._disabled=!1;i._defaults={disabled:!1,fixed:!1,reject:!0,useVisibility:!1,pin:!0,type:"bounce",fillMode:"none",timingFunction:"ease",playState:"running",direction:"normal",duration:1e3,delay:0,iterationCount:1};i.raf=window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout;return i}();e.AnimationBuilder=n},function(t,i,e){"use strict";function n(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"__esModule",{value:!0});n(e(7));n(e(3));n(e(1))},function(t,e,i){"use strict";var n=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(r=(s<3?o(r):3<s?o(e,i,r):o(e,i))||r);return 3<s&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=i(3),r=i(1),a=function(){function t(){}return t=n([o.NgModule({declarations:[s.AnimatesDirective],exports:[s.AnimatesDirective],providers:[r.AnimationService]})],t)}();e.AnimatorModule=a}])});
//# sourceMappingURL=css-animator.min.js.map
