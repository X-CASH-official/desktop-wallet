!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/forms"],e):e(t.ngxBarRating=t.ngxBarRating||{},t.ng.core,t.ng.common,t.ng.forms)}(this,function(t,e,n,r){"use strict";var i={provide:r.NG_VALUE_ACCESSOR,useExisting:e.forwardRef(function(){return a}),multi:!0},o={provide:r.NG_VALIDATORS,useExisting:e.forwardRef(function(){return a}),multi:!0},a=function(){function t(t){this.changeDetectorRef=t,this.contexts=[],this.max=5,this.readOnly=!1,this.theme="default",this.showText=!1,this.titles=[],this.required=!1,this.hover=new e.EventEmitter,this.leave=new e.EventEmitter,this.rateChange=new e.EventEmitter(!0),this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.ngOnChanges=function(t){t.rate&&this.update(this.rate)},t.prototype.ngOnInit=function(){var t=this;this.contexts=Array.from({length:this.max},function(e,n){return{selected:!1,fraction:!1,click:function(e){return t.handleClick(e,n+1)},enter:function(){return t.handleEnter(n+1)}}}),this.updateState(this.rate)},t.prototype.update=function(t,e){void 0===e&&(e=!0),this.readOnly||this.disabled||this.rate===t||(this.rate=t,this.rateChange.emit(this.rate)),e&&(this.onChange(this.rate),this.onTouched()),this.updateState(this.rate)},t.prototype.reset=function(){this.leave.emit(this.nextRate),this.updateState(this.rate)},t.prototype.updateState=function(t){var e=this;this.nextRate=t-1,this.contexts=Array.from({length:this.max},function(n,r){return{selected:r+1<=t,fraction:(r+1===Math.round(t)&&t%1)>=.5,click:function(t){return e.handleClick(t,r)},enter:function(){return e.handleEnter(r)}}})},t.prototype.handleClick=function(t,e){t.preventDefault(),t.stopPropagation(),this.update(e+1)},t.prototype.handleEnter=function(t){this.disabled||this.readOnly||(this.contexts.map(function(e,n){e.active=n<=t,e.fraction=!1,e.selected=!1}),this.nextRate=t,this.hover.emit(t))},t.prototype.writeValue=function(t){this.update(t,!1),this.changeDetectorRef.markForCheck()},t.prototype.validate=function(t){return this.required&&!t.value?{required:!0}:null},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this.disabled=t},t}();a.decorators=[{type:e.Component,args:[{selector:"bar-rating",template:'\n    <div [class]="\'br br-\' + theme" [class.br-readonly]="readOnly" [class.br-disabled]="disabled">\n\n      <div class="br-units" (mouseleave)="reset()">\n\n        <div class="br-unit" *ngFor="let unit of contexts" [class.br-fraction]="unit.fraction"\n            [class.br-selected]="unit.selected" [class.br-active]="unit.active"\n            (click)="unit.click($event)" (mouseenter)="unit.enter()"></div>\n\n      </div>\n\n      <div *ngIf="showText" class="br-text">{{ nextRate | rateTitle: titles}}</div>\n    </div>\n  ',styles:["\n    *{box-sizing:border-box}.br{position:relative;margin:15px 0}.br-units{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.br-unit{cursor:pointer;-webkit-font-smoothing:antialiased;text-rendering:auto}.br-disabled .br-unit,.br-readonly .br-unit{cursor:default}\n  "],providers:[i,o],changeDetection:e.ChangeDetectionStrategy.OnPush}]}],a.ctorParameters=function(){return[{type:e.ChangeDetectorRef}]},a.propDecorators={rate:[{type:e.Input}],max:[{type:e.Input}],readOnly:[{type:e.Input}],theme:[{type:e.Input}],showText:[{type:e.Input}],titles:[{type:e.Input}],required:[{type:e.Input}],hover:[{type:e.Output}],leave:[{type:e.Output}],rateChange:[{type:e.Output}]};var s=function(){function t(){}return t.prototype.transform=function(t,e){return void 0===t&&(t=0),e[t]||t+1},t}();s.decorators=[{type:e.Pipe,args:[{name:"rateTitle"}]}],s.ctorParameters=function(){return[]};var u=function(){function t(){}return t}();u.decorators=[{type:e.NgModule,args:[{declarations:[a,s],imports:[n.CommonModule,r.FormsModule],exports:[a]}]}],u.ctorParameters=function(){return[]},t.BarRatingModule=u,Object.defineProperty(t,"__esModule",{value:!0})});
